<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.tedu.dao.OrderMapper">
	<resultMap type="com.tedu.pojo.Order" id="orderRM">
		<id column="id" property="id"/>
		<result column="door_id" property="doorId"/>
		<result column="order_no" property="orderNo"/>
		<result column="order_type" property="orderType"/>
		<result column="pnum" property="pnum"/>
		<result column="cashier" property="cashier"/>
		<result column="order_time" property="orderTime"/>
		<result column="pay_time" property="payTime"/>
		<result column="pay_type" property="payType"/>
		<result column="price" property="price"/>
	</resultMap>
	<select id="orderList" resultMap="orderRM">
		select * from tb_order
	</select>
	
	<insert id="addOrder">
		INSERT INTO tb_order 
		VALUES 
		(null, #{doorId} , #{orderNo}, #{orderType}, #{pnum} , #{cashier} , #{orderTime} , #{payTime} , #{payType} , #{price});
	</insert>
	
	<select id="findById" resultMap="orderRM">
		select * from tb_order where id = #{id}
	</select>
	
	<update id="updateOrder">
		update tb_order 
		<set>
			<if test="doorId!=null">
				door_id = #{doorId} , 
			</if>
			<if test="orderNo!=null">
				order_no = #{orderNo} , 
			</if>
			<if test="orderType!=null">
				order_type = #{orderType} , 
			</if>
			<if test="pnum!=null">
				pnum = #{pnum} , 
			</if>
			<if test="cashier!=null">
				cashier = #{cashier} , 
			</if>
			<if test="orderTime!=null">
				order_time = #{orderTime} , 
			</if>
			<if test="payTime!=null">
				pay_time = #{payTime} , 
			</if>
			<if test="doorId!=null">
				pay_type = #{payType} , 
			</if>
			<if test="price!=null">
				price = #{price} , 
			</if>
		</set>
		where id = #{id}
	</update>
	
	<delete id="deleteOrder">
		delete from tb_order where id = #{id}
	</delete>
</mapper>